<!DOCTYPE <!DOCTYPE html>
<html lang="en">

<head>
  <title class="link">StarSpace</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/css/style.css" rel="stylesheet">


  <script>

    function loaded() {
        getUser();
        getFeed();
}



    function getFeed() {
        fetch("http://stardash.de:2000/posts/" + window.location.pathname.split("/")[2])
        .then(response => response.json())
        .then((response) => {
            console.log(response)

            var feed;


            response.post.forEach(element => {
                if (element.image == 1) {
                    feed+=' <a href="http://stardash.de:7788/post/'+element.post_id+
                    '" style="text-decoration: none;" onclick="this.href="https://google.com";""><div class="item" "><p class="link" style="margin: 2px; color: white"; text-decoration: none;>'
                    +element.content+'</p><img src=http://stardash.de:2000/image/'
                    +element.image_path.replaceAll(" ","SPACESYMBOL")+' style="width: 100%; max-height: auto; border-radius: 10px">'
                    +`<p style='color: white; font-family: nunito; text-align: right'>comments: `+element.comments+` votes: `+element.votes+`</p>`
                    +'</div> </a><hr class = "hr">'
                
                } else {
                    feed+=' <a href="http://stardash.de:7788/post/'+element.post_id+
                    '" style="text-decoration: none;" onclick="this.href="https://google.com";""><div class="item" "><p class="link" style="margin: 2px; color: white"; text-decoration: none;>'
                    +element.content+'</p>'
                    +`<p style='color: white; font-family: nunito; text-align: right'>comments: `+element.comments+` votes: `+element.votes+`</p>`
                    +'</div> </a><hr class = "hr">'
            
                }

            });

            document.getElementById("feed").innerHTML = feed.replace("undefined","");
        })
        .catch(err => console.log(err))
    }

    function getUser() {

      fetch("http://stardash.de:2000/profile/" + window.location.pathname.split("/")[2])
        .then(response => response.json())
        .then((response) => {
          console.log(response)

          document.getElementById("img").src = "http://stardash.de:2000/image/"+response.image_path;
          document.getElementById("bio").innerHTML = response.bio.replace("undefined", "");
          document.getElementById("username").innerHTML = response.username.replace("undefined", "")+" +["+response.votes+"]";
        })
        .catch(err => console.log(err))

    }
  </script>

</head>

<body style="background-color:#404258; " onload="loaded();">

  <h3 class="navtitle" style="font-family: dead_space; margin: 0px; color: white;" id="title">
    <a href="/"  class="navtitle" style="padding: 0px; margin: 0px;">StarSpace</a>

  </h3>

  <img id="img"   style="width: 100%;">
  <h3 id="username" style="color: white; margin: 5px; font-family: nunito;">
        
  </h3>
  <p id="bio" style="color: white; margin: 5px; font-family: nunito;">
   
  </p>

  <p id="feed" style="color: white; margin: 5px; font-family: nunito;">
   
  </p>
  <style>

.navtitle {

      position: sticky;
      top: 0;
      background-color:#474E68;
      width: 100%;
      padding: 10px;      
      text-decoration: none;
      color: #FFFFFF;
}


    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0px;
      padding: 0px;
      overflow-x: hidden;
    }

    @font-face {
      font-family: 'dead_space';
      src: URL('/space.ttf') format('truetype');
    }

    @font-face {
      font-family: 'nunito';
      src: URL('/nunito.ttf') format('truetype');
    }


    /* On smaller screens, where height is less than 450px, change the style of the sidenav (less padding and a smaller font size) */
    @media screen and (max-height: 450px) {
      .sidebar {
        padding-top: 15px;
      }

      .sidebar a {
        font-size: 18px;
      }
    }
  </style>


</html>